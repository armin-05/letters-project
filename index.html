<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KakaoTalk + Notepad Desktop</title>

<style>
  :root {
    --bg-black:#000;
    --note-bg:#e6e6e6;
    --note-top:#9a9a9a;
    --dark-green:#1e7f34;
    --light-green:#9cff8a;
    --wrong-yellow:#fff666;
    --fade-time:5s;
  }

  html, body {
    margin:0; padding:0; height:100%;
    background:var(--bg-black);
    font-family:Arial, Helvetica, sans-serif;
    overflow:hidden;
  }

  /* --- Kakao icon --- */
  #icon {
    position:absolute;
    top:60px; left:60px;
    width:70px; height:80px;
    cursor:grab;
  }

  /* --- Note icon --- */
  #noteIcon {
    position:absolute;
    top:60px; left:160px;
    width:70px; height:80px;
    cursor:grab;
  }

  /* --- Kakao Window --- */
  #kakaoWindow {
    position:absolute;
    top:160px; left:160px;
    width:420px; height:340px;
    display:none;
    border-radius:8px;
    overflow:hidden;
    background:transparent;
  }

  #kakaoTopBar {
    height:40px;
    width:100%;
    background:transparent;
    cursor:grab;
  }

  #kakaoImage {
    display:block;
    width:100%;
    height:auto;
  }

  #messageContainer {
    position:absolute;
    top:115px; left:10px; right:10px; bottom:147px;
    overflow:auto;
  }

  .messageContainer { display:flex; margin-bottom:4px; }
  .message {
    display:inline-block;
    padding:8px 12px;
    border-radius:12px;
    margin:4px 0;
    max-width:70%;
    word-wrap:break-word;
    font-size:14px;
  }
  .userMsg { justify-content:flex-end; }
  .userMsg .message { background:#ffeb00; }
  .botMsg { justify-content:flex-start; }
  .botMsg .message { background:#ececec; }

  #typingArea {
    position:absolute;
    left:10px; bottom:65px;
    width:calc(100% - 90px);
    height:70px;
    font-size:15px;
    background:transparent;
    border:none;
    outline:none;
    resize:none;
    color:black;
    z-index:15;
  }

  #sendButton {
    position:absolute;
    right:15px; bottom:16px;
    width:60px; height:30px;
    font-weight:bold;
    border:none; border-radius:4px;
    background-color:#c0c0c0;
    cursor:not-allowed;
  }
  #sendButton.active { background-color:#ffeb00; cursor:pointer; }

  /* --- Note Window --- */
  #noteWindow {
    position:absolute;
    top:140px; left:280px;
    width:520px; height:420px;
    display:none;
    background:var(--note-bg);
    border-radius:8px;
    box-shadow:0 6px 18px rgba(0,0,0,0.5);
    overflow:hidden;
    user-select:none;
  }

  #noteTopBar {
    height:42px;
    background:var(--note-top);
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 10px;
    cursor:grab;
  }

  #noteTitle { color:#fff; font-weight:bold; font-size:14px; }

  #noteCloseBtn {
    width:26px; height:26px;
    border:none;
    border-radius:50%;
    background:#d94c4c;
    cursor:pointer;
  }

  #noteEditor {
    position:absolute;
    top:42px; left:0; right:0; bottom:0;
    padding:10px;
    box-sizing:border-box;
    overflow:auto;
    outline:none;
    font-family:monospace;
    font-size:16px;
    line-height:1.3;
    white-space:pre-wrap;
    word-wrap:break-word;
  }

  /* --- Resizers --- */
  .resizer {
    position:absolute;
    background:transparent;
    z-index:5;
  }
  .resizer.right { top:6px; right:0; bottom:6px; width:8px; cursor:e-resize; }
  .resizer.bottom { left:6px; right:6px; bottom:0; height:8px; cursor:s-resize; }
  .resizer.br { right:0; bottom:0; width:14px; height:14px; cursor:se-resize; }
  .resizer.bl { left:0; bottom:0; width:14px; height:14px; cursor:sw-resize; }

  /* highlight transitions */
  .fade-highlight {
    transition: background-color 0.3s ease;
  }
</style>
</head>
<body>

<!-- Kakao icon -->
<img id="icon" src="Screenshot 2025-10-15 144240.png" alt="Kakao">

<!-- Note icon -->
<img id="noteIcon" src="notepad.png" alt="Note">

<!-- Kakao window -->
<div id="kakaoWindow">
  <div id="kakaoTopBar"></div>
  <img id="kakaoImage" src="Screenshot 2025-10-15 144717.png" alt="Kakao">
  <div id="messageContainer"></div>
  <textarea id="typingArea" spellcheck="false"></textarea>
  <button id="sendButton">Send</button>
</div>

<!-- Note window -->
<div id="noteWindow">
  <div id="noteTopBar">
    <div id="noteTitle">Notepad</div>
    <button id="noteCloseBtn"></button>
  </div>
  <div id="noteEditor" contenteditable="true"></div>

  <!-- Resizers -->
  <div class="resizer right"></div>
  <div class="resizer bottom"></div>
  <div class="resizer br"></div>
  <div class="resizer bl"></div>
</div>

<script>
/* ---------- ICON DRAG ---------- */
function makeDraggableIcon(el) {
  let drag=false, offX=0, offY=0;
  el.addEventListener('mousedown', e => {
    drag=true; offX=e.offsetX; offY=e.offsetY; el.style.cursor='grabbing';
  });
  document.addEventListener('mouseup', ()=>{drag=false; el.style.cursor='grab';});
  document.addEventListener('mousemove', e=>{
    if(!drag) return;
    el.style.left=(e.pageX-offX)+'px';
    el.style.top=(e.pageY-offY)+'px';
  });
}
makeDraggableIcon(document.getElementById('icon'));
makeDraggableIcon(document.getElementById('noteIcon'));

/* ---------- KAKAO WINDOW ---------- */
const kakaoIcon = document.getElementById('icon');
const kakaoWindow = document.getElementById('kakaoWindow');
kakaoIcon.addEventListener('click',()=> kakaoWindow.style.display='block');

/* ---------- NOTE WINDOW ---------- */
const noteIcon = document.getElementById('noteIcon');
const noteWindow = document.getElementById('noteWindow');
const noteTopBar = document.getElementById('noteTopBar');
const noteCloseBtn = document.getElementById('noteCloseBtn');
const noteEditor = document.getElementById('noteEditor');

noteIcon.addEventListener('click',()=> {
  noteWindow.style.display='block';
  noteEditor.focus();
});

noteCloseBtn.addEventListener('click',()=> noteWindow.style.display='none');

/* --- Move window --- */
let dragW=false, offX=0, offY=0;
noteTopBar.addEventListener('mousedown', e=>{
  dragW=true;
  const r=noteWindow.getBoundingClientRect();
  offX=e.clientX - r.left;
  offY=e.clientY - r.top;
});
document.addEventListener('mouseup', ()=>dragW=false);
document.addEventListener('mousemove', e=>{
  if(!dragW) return;
  noteWindow.style.left=(e.clientX-offX)+'px';
  noteWindow.style.top=(e.clientY-offY)+'px';
});

/* --- Resizing --- */
function resizeInit(e,mode){
  e.preventDefault();
  const startR=noteWindow.getBoundingClientRect();
  const sx=e.clientX, sy=e.clientY;
  function move(ev){
    let dx=ev.clientX-sx, dy=ev.clientY-sy;
    let w=startR.width, h=startR.height, left=startR.left;
    if(mode==='right'||mode==='br') w=Math.max(280,startR.width+dx);
    if(mode==='bottom'||mode==='br') h=Math.max(200,startR.height+dy);
    if(mode==='bl'){ w=Math.max(280,startR.width-dx); left=startR.left+dx; h=Math.max(200,startR.height+dy);}
    noteWindow.style.width=w+'px';
    noteWindow.style.height=h+'px';
    noteWindow.style.left=left+'px';
  }
  function up(){document.removeEventListener('mousemove',move);document.removeEventListener('mouseup',up);}
  document.addEventListener('mousemove',move);
  document.addEventListener('mouseup',up);
}
noteWindow.querySelector('.resizer.right').onmousedown=e=>resizeInit(e,'right');
noteWindow.querySelector('.resizer.bottom').onmousedown=e=>resizeInit(e,'bottom');
noteWindow.querySelector('.resizer.br').onmousedown=e=>resizeInit(e,'br');
noteWindow.querySelector('.resizer.bl').onmousedown=e=>resizeInit(e,'bl');

/* ---------- Highlight Logic ---------- */
const targetText = "INSERT TEXT HERE";

function highlightText(node){
  const text = node.innerText;
  node.innerHTML = '';
  for(let i=0;i<text.length;i++){
    const ch = text[i];
    const exp = targetText[i] || '';
    const span = document.createElement('span');
    span.textContent = ch;
    span.classList.add('fade-highlight');
    if(!exp){
      span.style.background= getComputedStyle(document.documentElement).getPropertyValue('--wrong-yellow');
    } else if(ch === exp){
      span.style.background = getComputedStyle(document.documentElement).getPropertyValue('--dark-green');
      span.style.color = "#fff";
      fadeOut(span);
    } else if(ch.toLowerCase() === exp.toLowerCase()){
      span.style.background = getComputedStyle(document.documentElement).getPropertyValue('--light-green');
      fadeOut(span);
    } else {
      span.style.background = getComputedStyle(document.documentElement).getPropertyValue('--wrong-yellow');
    }
    node.appendChild(span);
  }
}

function fadeOut(el){
  setTimeout(()=>{
    el.style.transition = "background-color 1s ease, color 1s ease";
    el.style.background = "transparent";
    el.style.color = "#000";
  }, 5000);
}

noteEditor.addEventListener('input', ()=>{
  const sel = window.getSelection();
  const range = sel.getRangeAt(0);
  const pos = range.startOffset;
  highlightText(noteEditor);
  try {
    const child = noteEditor.childNodes[pos] || noteEditor.lastChild;
    if(child) {
      const newRange = document.createRange();
      newRange.setStart(child,1);
      newRange.collapse(true);
      sel.removeAllRanges();
      sel.addRange(newRange);
    }
  } catch(e){}
});

</script>
</body>
</html>
